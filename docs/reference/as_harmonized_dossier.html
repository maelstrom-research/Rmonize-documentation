<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Validate and coerce as a harmonized dossier object — as_harmonized_dossier • Rmonize</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Validate and coerce as a harmonized dossier object — as_harmonized_dossier"><meta property="og:description" content="Checks if an object is a valid harmonized dossier and returns it with the
appropriate Rmonize::class attribute. This function mainly helps validate
inputs within other functions of the package but could be used separately to
ensure that an object has an appropriate structure. The function
has two arguments that can optionally be declared by the user
(unique_col_dataset and unique_col_id). unique_col_dataset refers to
the columns which contains name of each harmonized dataset. unique_col_id
refers to the column in harmonized datasets which identifies unique
combinations of observation/dataset. These two columns are added to ensure
that there is always a unique entity identifier when datasets are pooled."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rmonize</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0.9599</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a-install-your-working-environment.html">Install your working environment</a>
    </li>
    <li>
      <a href="../articles/b-simple-example-of-data-processing-with-Rmonize.html">Simple example of data processing with Rmonize</a>
    </li>
    <li>
      <a href="../articles/c-explore-and-prepare-input-datasets-and-data-dictionaries.html">Explore and prepare input datasets and data dictionaries</a>
    </li>
    <li>
      <a href="../articles/d-process-inputs-and-generate-harmonized-outputs.html">Process inputs and generate harmonized outputs</a>
    </li>
    <li>
      <a href="../articles/e-summarize-and-secure-harmonized-outputs.html">Summarize and secure harmonized outputs</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/maelstrom-research/Rmonize/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Validate and coerce as a harmonized dossier object</h1>
    <small class="dont-index">Source: <a href="https://github.com/maelstrom-research/Rmonize/blob/HEAD/R/02-harmo_process_harmonization.R" class="external-link"><code>R/02-harmo_process_harmonization.R</code></a></small>
    <div class="hidden name"><code>as_harmonized_dossier.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Checks if an object is a valid harmonized dossier and returns it with the
appropriate <code><a href="https://rdrr.io/r/base/class.html" class="external-link">Rmonize::class</a></code> attribute. This function mainly helps validate
inputs within other functions of the package but could be used separately to
ensure that an object has an appropriate structure. The function
has two arguments that can optionally be declared by the user
(<code>unique_col_dataset</code> and <code>unique_col_id</code>). <code>unique_col_dataset</code> refers to
the columns which contains name of each harmonized dataset. <code>unique_col_id</code>
refers to the column in harmonized datasets which identifies unique
combinations of observation/dataset. These two columns are added to ensure
that there is always a unique entity identifier when datasets are pooled.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">as_harmonized_dossier</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  dataschema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">$</span><span class="va">`Rmonize::DataSchema`</span>,</span>
<span>  data_proc_elem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">$</span><span class="va">`Rmonize::Data Processing Elements`</span>,</span>
<span>  harmonized_col_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">$</span><span class="va">`Rmonize::harmonized_col_id`</span>,</span>
<span>  harmonized_col_dataset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">$</span><span class="va">`Rmonize::harmonized_col_dataset`</span>,</span>
<span>  harmonized_data_dict_apply <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>A A potential harmonized dossier object to be coerced.</p></dd>


<dt>dataschema</dt>
<dd><p>A DataSchema object.</p></dd>


<dt>data_proc_elem</dt>
<dd><p>A Data Processing Elements object.</p></dd>


<dt>harmonized_col_id</dt>
<dd><p>A character string identifying the name of the
column present in every dataset to use as a participant identifier.</p></dd>


<dt>harmonized_col_dataset</dt>
<dd><p>A character string identifying the column
to use for dataset names.</p></dd>


<dt>harmonized_data_dict_apply</dt>
<dd><p>Whether to apply the dataschema to each
harmonized dataset. FALSE by default.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list of data frame(s) containing harmonized dataset(s).
The DataSchema and Data Processing Elements are preserved as attributes of
the harmonized dossier.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>A harmonized dossier is a named list containing one or more data frames,
which are harmonized datasets. A harmonized dossier is generally the
product of applying processing to a dossier object The name of each
harmonized dataset (data frame) is taken from the reference input dataset.
A harmonized dossier also contains the DataSchema and
Data Processing Elements used in processing as attributes.</p>
<p>A DataSchema is the list of core variables to generate across datasets and
related metadata. A DataSchema object is a list of data frames with elements
named 'Variables' (required) and 'Categories' (if any). The 'Variables'
element must contain at least the <code>name</code> column, and the 'Categories'
element must contain at least the <code>variable</code> and <code>name</code> columns to be usable
in any function. In 'Variables' the <code>name</code> column must also have unique
entries, and in 'Categories' the combination of <code>variable</code> and <code>name</code> columns
must also be unique.</p>
<p>The Data Processing Elements specifies the input elements and processing algorithms
to generate harmonized variables in the DataSchema formats. It is also
contains metadata used to generate documentation of the processing.
A Data Processing Elements object is a data frame with specific columns
used in data processing: <code>dataschema_variable</code>, <code>input_dataset</code>,
<code>input_variables</code>, <code>Mlstr_harmo::rule_category</code> and <code>Mlstr_harmo::algorithm</code>.
To initiate processing, the first entry must be the creation of a harmonized
primary identifier variable (e.g., participant unique ID).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use Rmonize_examples to run examples.</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">harmonized_dossier</span> <span class="op">&lt;-</span> <span class="va">Rmonize_examples</span><span class="op">[[</span><span class="st">"harmonized_dossier"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">harmonized_dossier</span> <span class="op">&lt;-</span> <span class="fu">as_harmonized_dossier</span><span class="op">(</span><span class="va">harmonized_dossier</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">harmonized_dossier</span><span class="op">$</span><span class="va">dataset_study1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Rows: 4,000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Columns: 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ adm_unique_id             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PID7216", "PID5380", "PID5531", "PID7612", …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ adm_study_id              <span style="color: #949494; font-style: italic;">&lt;chr+lbl&gt;</span> "1", "1", "1", "1", "1", "1", "1", "1", …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ sdc_age_m                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 27, 38, 27, 26, 33, 31, 32, 29, 29, 26, 33, …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ sdc_marital_m             <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ lsb_alc_binge_m_preg      <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span> 0, 0, 0, 0, <span style="color: #BB0000;">NA</span>, 0, 0, 0, 0, 0, 0, 0, 0, …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ lsb_alc_binge_m_first_tri <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ preg_gestational_age_del  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 41, 38, 39, 41, 40, 38, 38, 39, 41, 40, 41, …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ sdc_sex_c                 <span style="color: #949494; font-style: italic;">&lt;int+lbl&gt;</span> 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 1, 1…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ pm_birthweight            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2603.164, 3295.346, 3426.888, 3112.095, 2394…</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Guillaume Fabre, Maelstrom-research group.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

